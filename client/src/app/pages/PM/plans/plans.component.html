<main id="main" class="main">
   <div class="pagetitle">
      <h1> {{'Projects' | translate}}</h1>
      <nav>
         <ol class="breadcrumb">
            <li class="breadcrumb-item"><a routerLink="/"> {{'Home' | translate}}</a></li>
            <li class="breadcrumb-item"> {{'Projects' | translate}}</li>
            <li class="breadcrumb-item active"> {{'List' | translate}}</li>
         </ol>
      </nav>
   </div>
   <div class="text-end col-lg-12">
      <button class="btn btn-primary text-end mb-3" (click)="addPlan()">  {{'Add Project' | translate}} </button>
   </div>
   <section class="section profile">
      <div class="row">

         <div class="col-lg-6" *ngFor="let plan of Plans" style="cursor: pointer;">

            <div class="card">
               <div class="card-header">

                  <div>
                     <div>
                        {{plan.PlanName}}
                     </div>
                     <div style="text-align: right!important;">
                        <span *ngIf="plan.HasTask" class="badge bg-success"> {{'Has Task' | translate}}</span> <span *ngIf="!plan.HasTask"
                           class="badge bg-danger"> {{'Has No Task' | translate}}</span>
                     </div>
                  </div>
               </div>
               <div class="card-body" style="background-color: #f6f9ff !important;">
                  <!-- (click)="tasks(plan)" -->
                  <h5 class="card-title ">
                     <div class="row">
                        <div class="col-md-10">
                           {{plan.StructureName }}

                        </div>
                        <div class="col-md-2" style="text-align: right!important;">
                           {{plan.ProjectType}}
                        </div>
                     </div>
                  </h5>

                  <div class="text-center" style="color: #798eb3;">
                     <span class="card-title">  {{'Planned Budegt' | translate}} :</span>
                     {{plan.PlandBudget}} ETB &nbsp;
                     <span class="card-title">  {{'Remaining Budegt' | translate}} : </span>
                     {{plan.RemainingBudget}} ETB <br />
                     <div class="mt-2">

                     </div>
                     {{plan.ProjectManager}} -  {{'Project Manager' | translate}} <br />
                     {{plan.Director}} -  {{'Director' | translate}} <br />
                     {{plan.FinanceManager }} -  {{'Finance' | translate}}
                  </div>
               </div>
               <div class="card-footer">

                  <div class="row">
                     <div class="col-lg-4">
                         {{'Tasks' | translate}}: {{plan.NumberOfTask}} &nbsp;&nbsp;
                         {{'Actvities' | translate}}  : {{plan.NumberOfActivities}}

                     </div>
                     <div class="col-lg-4" style="text-align: right!important;">
                         {{'Weight' | translate}} : {{plan.PlanWeight}} %
                     </div>
                     <div class="col-lg-4" style="text-align: right!important;">
                        <button class="btn btn-sm btn-outline-primary mt-1" (click)="routeToPlanDetail(plan.Id)"> Plan Detail
                        </button> 
                        <button *ngIf="roleMatch(['Super Admin','PM Admin','Planner']) || this.user.StrucId.toLowerCase() === this.plan.StructureId?.toLowerCase()"  type="button" (click)="editPlan(plan)"
                           class="btn btn-sm btn-outline-warning mt-1"><i class="bi bi-pencil"></i>  {{'Update' | translate}}</button> |
                        <button *ngIf="roleMatch(['Super Admin','PM Admin','Planner']) || this.user.StrucId.toLowerCase() === this.plan.StructureId?.toLowerCase()"  type="button" (click)="deletePlan(plan.Id)"
                           class="btn btn-sm btn-outline-danger mt-1"><i class="bi bi-trash"></i>  {{'Delete' | translate}}</button>
                     </div>
                  </div>

                  <!-- <div style="text-align: right; ">
                     {{plan.PlanWeight}} %
                  </div> -->


                  <div class="progress mt-3">
                     <div class="progress-bar progress-bar-striped bg-success progress-bar-animated" role="progressbar"
                        [ngStyle]="applyStyles(plan.NumberOfActivities,plan.NumberOfTaskCompleted)" aria-valuenow="25"
                        aria-valuemin="0" aria-valuemax="100"></div>
                  </div>
               </div>
            </div>

            <!-- mmm -->


            <!-- mmmmm -->

         </div>

      </div>
   </section>
</main>